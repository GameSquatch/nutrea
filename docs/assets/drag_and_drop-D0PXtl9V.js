import{r as s,j as r,L as D}from"./index-DNcRkmDI.js";import{u as b}from"./use_tree-CpEknUQ_.js";import{a as j,c as C}from"./generate_names-BehOjVxm.js";function T(){const[e,p]=s.useState(null),[d,c]=s.useState({}),[i,u]=s.useState(()=>j(C(100))),f=s.useCallback(a=>{p(a.id)},[]),{visibleList:h,navigateWithKey:t}=b({data:i.root,getChildren:a=>a.pets?.map(n=>i[n]),expandedState:d,onExpandedStateChange:c,onSelection:f,showRoot:!1}),g=s.useCallback((a,n,o)=>{u(l=>{const m={...l[n]};m.pets=m.pets.filter(v=>v!==a);const x={...l[o]};return x.pets||(x.pets=[]),x.pets=[...x.pets,a],{...l,root:{...l.root},[n]:m,[o]:x}}),d[o]||c(l=>({...l,[o]:!0}))},[d]);return r.jsxs("div",{children:[r.jsx(D,{to:"/",children:"Go Back Home"}),r.jsx("div",{role:"tree",style:{height:"600px",overflow:"auto"},children:h.map((a,n)=>r.jsx(S,{node:a,selectedNodeId:e,navigateWithKey:o=>t(o,n),onNodeMoved:g},a.id))})]})}const S=({node:e,selectedNodeId:p,navigateWithKey:d,onNodeMoved:c})=>{const i=p===e.id,u=s.useRef(null);s.useEffect(()=>{i&&u.current&&u.current.focus()},[i]);const f=s.useCallback(t=>{t.dataTransfer.setData("app/node-id",e.id),t.dataTransfer.setData("app/parent-id",e.parentId??"")},[e]),h=s.useCallback(t=>{const g=t.dataTransfer.getData("app/node-id"),a=t.dataTransfer.getData("app/parent-id");c(g,a,e.id)},[e,c]);return r.jsxs("div",{ref:u,tabIndex:-1,onClick:e.select,role:"tree-item","aria-expanded":e.isExpanded,"aria-selected":p!==null&&i,style:{paddingLeft:`${e.level*16+8}px`,display:"flex",height:"30px",alignItems:"center",border:e.id===p?"1px dashed blue":void 0,width:"100%"},onKeyDown:d,onDragStart:f,onDragEnter:t=>t.preventDefault(),onDragOver:t=>t.preventDefault(),onDrop:h,draggable:"true",children:[e.hasChildren?r.jsx("button",{onClick:t=>{t.stopPropagation(),e.toggleExpanded()},style:{display:"inline-block",width:"20px",height:"25px",marginRight:"8px"},children:e.isExpanded?"-":"+"}):r.jsx("div",{style:{width:"20px"}}),r.jsx("span",{children:e.name})]},e.id)};export{T as component};
